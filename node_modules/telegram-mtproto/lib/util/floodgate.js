'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _kefir = require('kefir');

var bufferOptions = { flushOnEnd: false };

function _ref() {
  return false;
}

var floodgate = (flood, gate, gateMap) => {

  var state = gate.map(gateMap).toProperty(_ref);

  var combinator = (f, s) => ({
    stream: f,
    gateState: s
  });

  var bufferCondition = ({ gateState }) => !gateState;

  var streamSelector = ({ stream }) => stream;

  var output = (0, _kefir.combine)([flood, state], combinator).bufferWhile(bufferCondition, bufferOptions).flatten().map(streamSelector).skipDuplicates();
  return output;
};

exports.default = floodgate;
//# sourceMappingURL=floodgate.js.map