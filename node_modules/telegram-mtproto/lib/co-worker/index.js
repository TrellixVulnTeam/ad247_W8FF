'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _webWorker = require('./web-worker');

var _webWorker2 = _interopRequireDefault(_webWorker);

var _cryptoBin = require('./crypto-bin');

var _cryptoBin2 = _interopRequireDefault(_cryptoBin);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var getCrypto = common => {
  var cryptoWorker = (0, _cryptoBin2.default)();
  var useWorker = common.use.webworker;

  function _ref(args) {
    return webWorker.run('factorize', args);
  }

  function _ref2(args) {
    return webWorker.run('mod-pow', args);
  }

  if (useWorker) {
    try {
      var webWorker = _webWorker2.default.of();
      var factorize = _ref;

      var modPow = _ref2;

      cryptoWorker.factorize = factorize;
      cryptoWorker.modPow = modPow;
    } catch (err) {
      useWorker = false;
    }
  }
  common.use.webworker = useWorker;

  return cryptoWorker;
};

exports.default = getCrypto;
//# sourceMappingURL=index.js.map