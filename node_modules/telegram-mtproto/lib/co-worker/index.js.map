{"version":3,"sources":["../../src/co-worker/index.js"],"names":["getCrypto","common","cryptoWorker","useWorker","use","webworker","args","webWorker","run","of","factorize","modPow","err"],"mappings":";;;;;;AAEA;;;;AACA;;;;;;AAIA,IAAMA,YAAaC,MAAD,IAAoB;AACpC,MAAMC,eAAe,0BAArB;AACA,MAAIC,YAAYF,OAAOG,GAAP,CAAWC,SAA3B;;AAKM,gBAACC,IAAD;AAAA,WAAUC,UAAUC,GAAV,CAAc,WAAd,EAA2BF,IAA3B,CAAV;AAAA;;AAGA,iBAACA,IAAD;AAAA,WAAUC,UAAUC,GAAV,CAAc,SAAd,EAAyBF,IAAzB,CAAV;AAAA;;AAPN,MAAIH,SAAJ,EAAe;AACb,QAAI;AACF,UAAMI,YAAY,oBAAUE,EAAV,EAAlB;AACA,UAAMC,gBAAN;;AAGA,UAAMC,cAAN;;AAGAT,mBAAaQ,SAAb,GAAyBA,SAAzB;AACAR,mBAAaS,MAAb,GAAsBA,MAAtB;AACD,KAVD,CAUE,OAAOC,GAAP,EAAY;AACZT,kBAAY,KAAZ;AACD;AACF;AACDF,SAAOG,GAAP,CAAWC,SAAX,GAAuBF,SAAvB;;AAEA,SAAOD,YAAP;AACD,CArBD;;kBAuBeF,S","file":"index.js","sourcesContent":["//@flow\n\nimport Webworker from './web-worker'\nimport CryptoBin from './crypto-bin'\nimport type { Common } from '../config-provider'\nimport type { FactorizeFunc, ModPowFunc } from './index.h'\n\nconst getCrypto = (common: Common) => {\n  const cryptoWorker = CryptoBin()\n  let useWorker = common.use.webworker\n  if (useWorker) {\n    try {\n      const webWorker = Webworker.of()\n      const factorize: FactorizeFunc =\n        (args) => webWorker.run('factorize', args)\n\n      const modPow: ModPowFunc =\n        (args) => webWorker.run('mod-pow', args)\n\n      cryptoWorker.factorize = factorize\n      cryptoWorker.modPow = modPow\n    } catch (err) {\n      useWorker = false\n    }\n  }\n  common.use.webworker = useWorker\n\n  return cryptoWorker\n}\n\nexport default getCrypto\n"]}