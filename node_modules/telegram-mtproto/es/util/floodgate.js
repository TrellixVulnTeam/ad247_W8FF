import { combine } from 'kefir';


var bufferOptions = { flushOnEnd: false };

function _ref() {
  return false;
}

var floodgate = (flood, gate, gateMap) => {

  var state = gate.map(gateMap).toProperty(_ref);

  var combinator = (f, s) => ({
    stream: f,
    gateState: s
  });

  var bufferCondition = ({ gateState }) => !gateState;

  var streamSelector = ({ stream }) => stream;

  var output = combine([flood, state], combinator).bufferWhile(bufferCondition, bufferOptions).flatten().map(streamSelector).skipDuplicates();
  return output;
};

export default floodgate;
//# sourceMappingURL=floodgate.js.map